name: Build Spring app
on: push
jobs:
    premier-job:
        name: Build and run Spring app
        runs-on: ubuntu-latest
        steps:
            - name: Get Spring app
              uses: actions/checkout@v4
            - name: Set up JDK
              uses: actions/setup-java@v4
              with:
                java-version: '17'
                distribution: 'adopt'
            - name: Cache Maven dependencies
              uses: actions/cache@v4
              with:
                path: ~/.m2/repository
                key: ${{ runner.os }}-m2-repository-${{ hashFiles('**/pom.xml') }}
            - name: Build with Maven
              run: mvn -f pom.xml clean package
            - name: Show contents of the target directory
              run: ls -la target
            - name: Upload artifact
              uses: actions/upload-artifact@v4
              with:
                name: mon_app
                path: target